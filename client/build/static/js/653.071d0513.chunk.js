"use strict";(self.webpackChunkprowhatsappweb=self.webpackChunkprowhatsappweb||[]).push([[653],{2653:(e,t,a)=>{a.r(t),a.d(t,{default:()=>S});var s=a(2791);a(539),a(4122),a(4164);"undefined"!==typeof window?s.useLayoutEffect:s.useEffect;var d=a(9434),n=a(304),o=a(2070),r=a(8538),i=a(9878),l=a(4712),c=a(151),m=a(184);const f=e=>{let{onPress:t,iconName:a,modalType:s}=e;return(0,m.jsx)("button",{onClick:t,style:{marginRight:5,backgroundColor:"transparent",border:"none"},disabled:"info"===s&&!0,children:(0,m.jsx)(n.D9,{iconName:a,iconType:"duotone",className:"bigger-icon"})})},u=e=>{let{page:t,fetchNextData:a,updateDraft:n,setIsAddModalShow:u,addDraft:h,customTheme:g,modalType:x,selectedUser:p}=e;const j=(0,d.v9)((e=>e.draft.createDraft)),b=(0,d.v9)((e=>e.draft.updateDraft)),y=(0,d.I0)(),[v,N]=(0,s.useState)(""),[D,S]=(0,s.useState)(""),[C,T]=(0,s.useState)(!1),[k,w]=(0,s.useState)(!1);(0,s.useEffect)((()=>{N("add"!==x&&p?p.text:""),S("add"!==x&&p?p.title:"")}),[p,x]);(0,s.useEffect)((()=>((0,o.d6)(j)&&(T(!1),u(!1),(0,r.i)(j.data.message,"SUCCESS",g.theme),a(t)),(0,o.hg)(j)&&T(!0),(0,o.hx)(j)&&(console.log(j.error),T(!1),(0,r.i)(j.error.message,"FAIL",g.theme)),N(""),S(""),()=>{y((0,l.q_)())})),[u,j]),(0,s.useEffect)((()=>((0,o.d6)(b)&&(T(!1),u(!1),(0,r.i)(b.data.message,"SUCCESS",g.theme),a(t)),(0,o.hg)(b)&&T(!0),(0,o.hx)(b)&&(T(!1),(0,r.i)(b.error.message,"FAIL",g.theme)),N(""),S(""),()=>{y((0,c.XH)())})),[u,b]);const I=e=>{const t=document.getElementById("message-box"),{selectionStart:a,selectionEnd:s}=t;if(a!==s){const t=v.slice(0,a),d=v.slice(a,s),n=v.slice(s);let o=d;switch(e){case"bold":o="*".concat(d,"*");break;case"italic":o="_".concat(d,"_");break;case"strikethrough":o="~".concat(d,"~")}const r="".concat(t).concat(o).concat(n);N(r)}else{const t=(()=>{switch(e){case"bold":return"*";case"italic":return"_";case"strikethrough":return"~";default:return""}})(),s=v.slice(0,a),d=v.slice(a),n="".concat(s).concat(t).concat(t).concat(d);N(n)}},E=e=>{const t=document.getElementById("message-box"),{selectionStart:a,selectionEnd:s}=t;if(a!==s){const t=v.slice(0,a),d=v.slice(a,s),n=v.slice(s);let o=d.split("\n").map(((t,a)=>"unordered"===e?"- ".concat(t):"ordered"===e?"".concat(a+1,". ").concat(t):t)).join("\n");const r="".concat(t).concat(o,"\n").concat(n);N(r)}};return(0,m.jsxs)("div",{className:"card",style:{padding:20},children:[(0,m.jsxs)("div",{className:"d-flex flex-column ",children:[(0,m.jsx)("h4",{children:"Title"}),(0,m.jsx)("input",{className:"form-control form-control-solid w-100 mb-5",placeholder:"Message Title..",value:D,onChange:e=>S(e.target.value),disabled:"info"===x&&!0})]}),(0,m.jsxs)("div",{className:"d-flex flex-column mt-3",children:[(0,m.jsx)("h4",{children:"Message"}),(0,m.jsxs)("div",{className:"d-flex justify-content-center pt-2 pb-2 border rounded-top-3 light",children:[(0,m.jsx)(f,{onPress:()=>I("bold"),iconName:"text-bold",modalType:x}),(0,m.jsx)(f,{onPress:()=>I("italic"),iconName:"text-italic",modalType:x}),(0,m.jsx)(f,{onPress:()=>I("strikethrough"),iconName:"text-strikethrough",modalType:x}),(0,m.jsx)(f,{onPress:()=>E("ordered"),iconName:"text-number",modalType:x}),(0,m.jsx)(f,{onPress:()=>E("unordered"),iconName:"text-circle",modalType:x}),(0,m.jsx)(f,{onPress:()=>w(!0),iconName:"emoji-happy",modalType:x})]}),(0,m.jsx)("textarea",{id:"message-box",rows:6,className:"form-control form-control-solid w-100 mb-5",placeholder:"L\xfctfen g\xf6ndermek istedi\u011finiz mesaj\u0131n\u0131z\u0131 yaz\u0131n\u0131z..",value:v,onChange:e=>N(e.target.value),disabled:"info"===x&&!0})]}),(0,m.jsx)("div",{style:{visibility:"info"===x&&"hidden",display:"flex",justifyContent:"flex-end",marginTop:20},children:(0,m.jsx)("button",{className:"btn btn-primary",onClick:()=>{if("add"===x){if(""===D)return void alert("L\xfctfen mesaj\u0131n ba\u015fl\u0131\u011f\u0131n\u0131 giriniz..");if(""===v)return void alert("L\xfctfen bir mesaj g\xf6nderiniz!");h({title:D,text:v})}else if("edit"===x){if(""===D)return void alert("L\xfctfen mesaj\u0131n ba\u015fl\u0131\u011f\u0131n\u0131 giriniz..");if(""===v)return void alert("L\xfctfen bir mesaj g\xf6nderiniz!");n({selectedUser:p,title:D,text:v})}},children:"add"===x?"Send":"Save"})}),k&&(0,m.jsx)(i.Z,{setShowEmojiModal:w,setSelectedEmoji:e=>{const t=e.native,a=document.getElementById("message-box"),{selectionStart:s,selectionEnd:d}=a,n=v.slice(0,s),o=v.slice(d),r="".concat(n).concat(t).concat(o);N(r),w(!1)},customTheme:g}),k&&(0,m.jsx)("div",{className:"modal-backdrop fade show"})]})};var h=a(2413);const g=e=>{let{page:t,fetchNextData:a,updateDraft:s,addDraft:d,setIsAddModalShow:n,customTheme:o,modalType:r,selectedUser:i}=e;return(0,m.jsx)("div",{className:"modal fade show d-block",id:"kt_modal_add_draft",role:"dialog",tabIndex:-1,"aria-modal":"true",children:(0,m.jsx)("div",{className:"modal-dialog modal-dialog-centered mw-650px",children:(0,m.jsxs)("div",{className:"modal-content",style:{display:"flex",justifyContent:"center"},children:[(0,m.jsx)(h.Z,{title:"Add Draft",handleCloseModal:()=>n(!1)}),(0,m.jsx)(u,{page:t,fetchNextData:a,setIsAddModalShow:n,customTheme:o,modalType:r,selectedUser:i,addDraft:d,updateDraft:s})]})})})};var x=a(43),p=a(3305),j=a(4114);const b=e=>{let{dispatch:t,updateDraft:a,deleteDraft:i,dataSource:l,addDraft:c,customTheme:f,setSelectedUser:u,selectedUser:h,paginateData:b,fetchNextData:y,loading:v}=e;const[N,D]=(0,s.useState)(!1),[S,C]=(0,s.useState)("add"),[T,k]=(0,s.useState)(1),w=(0,d.v9)((e=>e.draft.deleteDraft));return(0,s.useEffect)((()=>((0,o.d6)(w)&&(D(!1),(0,r.i)(w.data.message,"SUCCESS",f.theme),y(b.page)),(0,o.hg)(w),(0,o.hx)(w)&&(0,r.i)(w.error.message,"FAIL",f.theme),()=>{t((0,j.B$)())})),[D,w]),(0,m.jsxs)("div",{style:{display:"flex",flexDirection:"column",padding:10,backgroundColor:f.backgroundColor,borderRadius:10},children:[(0,m.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",marginTop:20,marginBottom:20,paddingLeft:20,paddingRight:20},children:[(0,m.jsx)("span",{style:{color:f.color,fontSize:21,fontWeight:"bold",fontFamily:"Inter"},children:"Draft List"}),(0,m.jsxs)("button",{type:"button",className:"btn btn-primary p-2 p-md-3",onClick:()=>{C("add"),D(!0)},children:[(0,m.jsx)(n.D9,{iconName:"plus",className:"fs-2"}),"Add Draft"]})]}),(0,m.jsxs)("div",{children:[v&&(0,m.jsx)("div",{className:"d-flex justify-content-center align-items-center",children:(0,m.jsx)(x.Z,{})}),l&&l.map((e=>(0,m.jsxs)("div",{style:{backgroundColor:f.itemBg,marginBottom:10,padding:10,borderRadius:10,paddingLeft:20,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,m.jsx)("span",{style:{color:f.color,cursor:"pointer"},onClick:()=>{C("info"),u(e),D(!0)},children:e.title}),(0,m.jsxs)("div",{children:[(0,m.jsx)("button",{onClick:()=>{C("edit"),u(e),D(!0)},style:{marginRight:5,backgroundColor:"transparent",border:"none"},children:(0,m.jsx)(n.D9,{iconName:"message-edit",iconType:"duotone",className:"bigger-icon"})}),(0,m.jsx)("button",{onClick:()=>{(e=>{i(e),y(1)})(e)},style:{marginRight:5,backgroundColor:"transparent",border:"none"},children:(0,m.jsx)(n.D9,{iconName:"delete-files",iconType:"duotone",className:"bigger-icon"})})]})]},e.id))),0===l.length&&(0,m.jsxs)("div",{className:"d-flex flex-column p-20 w-100 justify-content-center align-items-center border rounded",children:[(0,m.jsx)(n.D9,{iconName:"cross-circle",className:"bigger-icon mb-4"}),(0,m.jsx)("h3",{className:"mb-0 ",children:"Created Draft Not Available!"})]})]}),(0,m.jsx)("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:10},children:(0,m.jsx)(p.Z,{defaultCurrent:1,total:b.totalItems,pageSize:b.perpage,className:"light"===f.theme?"light-theme":"dark-theme",onChange:e=>{y(e)}})}),N&&(0,m.jsx)(g,{dispatch:t,fetchNextData:y,page:T,addDraft:c,setIsAddModalShow:D,customTheme:f,modalType:S,selectedUser:h,updateDraft:a}),N&&(0,m.jsx)("div",{className:"modal-backdrop fade show"})]})};var y=a(4229),v=a(931),N=a(4645),D=a(2290);const S=()=>{const[e,t]=(0,s.useState)(!1),{theme:a}=(0,D.Fg)(),n=(0,d.I0)(),r=(0,d.v9)((e=>e.draft.getAllDraft)),i=(0,d.v9)((e=>e.draft.getByIdDraft)),[f,u]=(0,s.useState)(5),[h,g]=(0,s.useState)({}),[x,p]=(0,s.useState)([]),[S,C]=(0,s.useState)(),[T,k]=(0,s.useState)(!1),w=e=>{let{id:t}=e;n((0,N.gV)({userId:(0,y.KA)("user").id,draftId:t}))},I=e=>{n((0,v.fM)({userId:(0,y.KA)("user").id,page:e,perPage:f}))};return(0,s.useEffect)((()=>{e||(n((0,v.fM)({userId:(0,y.KA)("user").id,page:1,perPage:f})),t(!0))}),[f,n,h,e]),(0,s.useEffect)((()=>((0,o.d6)(r)&&(p(r.data.data),g(r.data.meta),k(!1)),(0,o.hx)(r),(0,o.hg)(r)&&k(!0),()=>{n((0,v.wT)())})),[r,I]),(0,s.useEffect)((()=>((0,o.d6)(i)&&(C(i.data.data),n((0,N.JQ)())),(0,o.hx)(i),(0,o.hg)(i),()=>{n((0,N.JQ)())})),[x,i]),(0,m.jsx)("div",{style:{marginTop:"20px"},children:(0,m.jsx)(b,{dispatch:n,addDraft:e=>{let{title:t,text:a}=e;n((0,l.Zs)({userId:(0,y.KA)("user").id,title:t,text:a}))},dataSource:x,customTheme:a,title:"Draft Table",setSelectedUser:e=>{const t=e.id;w({id:t})},paginateData:h,fetchNextData:I,selectedUser:S,deleteDraft:e=>{n((0,j.do)({userId:(0,y.KA)("user").id,draftId:e.id}))},updateDraft:e=>{let{selectedUser:t,title:a,text:s}=e;n((0,c.qA)({userId:(0,y.KA)("user").id,draftId:t.id,title:a,text:s}))},loading:T})})}}}]);
//# sourceMappingURL=653.071d0513.chunk.js.map