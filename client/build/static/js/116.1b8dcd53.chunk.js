"use strict";(self.webpackChunkprowhatsappweb=self.webpackChunkprowhatsappweb||[]).push([[116],{116:(e,s,a)=>{a.r(s),a.d(s,{default:()=>D});var t=a(2791),o=a(5358),l=a(5903),d=(a(7882),a(304)),n=a(4664),r=a(184);const m=e=>{let{onSubmit:s}=e;const[a,o]=(0,t.useState)({name:"",lastName:"",areaCode:"",phone:""}),l=e=>{const{name:s,value:a}=e.target;o((e=>({...e,[s]:a})))};return(0,r.jsxs)("form",{className:"d-flex flex-column",style:{fontFamily:"Inter",marginTop:20},onSubmit:e=>{e.preventDefault(),(()=>{const e=a.areaCode+a.phone,t={name:a.name,lastName:a.lastName,phone:e};s(t)})()},children:[(0,r.jsxs)("div",{className:"mt-3",children:[(0,r.jsx)("h4",{children:"Customer Name"}),(0,r.jsx)("input",{type:"text",name:"name",value:a.name,onChange:l,required:!0,className:"form-control form-control-solid w-100 mb-5 mt-2",placeholder:"Customer Name"})]}),(0,r.jsxs)("div",{className:"mt-3",children:[(0,r.jsx)("h4",{children:"Customer Lastname"}),(0,r.jsx)("input",{type:"text",name:"lastName",value:a.lastName,onChange:l,required:!0,className:"form-control form-control-solid w-100 mb-5 mt-2",placeholder:"Customer Lastname"})]}),(0,r.jsxs)("div",{className:"d-flex gap-3 mt-3 mb-3",children:[(0,r.jsxs)("div",{className:"w-25",children:[(0,r.jsx)("h4",{children:"Area Code"}),(0,r.jsx)("input",{type:"number",name:"areaCode",value:a.areaCode,onChange:l,className:"form-control form-control-solid w-100 mb-5 mt-2",required:!0,placeholder:"+90"})]}),(0,r.jsxs)("div",{className:"w-100",children:[(0,r.jsx)("h4",{children:"Customer Phone Number"}),(0,r.jsx)("input",{type:"number",name:"phone",value:a.phone,onChange:l,className:"form-control form-control-solid w-100 mb-5 mt-2",required:!0,placeholder:"Customer Phone Number"})]})]}),(0,r.jsx)("div",{className:" d-flex justify-content-end",children:(0,r.jsx)("button",{className:"btn btn-primary fw-bold",type:"submit",children:"Add Customer"})})]})};var i=a(9434),c=a(2070),u=a(8538),h=a(2413),x=a(6335);const p=e=>{let{fetchNextData:s,page:a,addCustomer:o,setIsAddModalShow:l,customTheme:d}=e;const n=(0,i.v9)((e=>e.customer.addCustomer)),p=(0,i.I0)(),[j,f]=(0,t.useState)(""),[b,N]=(0,t.useState)(!1);return(0,t.useEffect)((()=>((0,c.d6)(n)&&(f(n.data.message),N(!1),l(!1),(0,u.i)(n.data.message,"SUCCESS",d.theme),s(a)),(0,c.hg)(n)&&N(!0),(0,c.hx)(n)&&(console.log(n.error),N(!1),f(n.error.message),(0,u.i)(n.error.message,"SUCCESS",d.theme)),()=>{p((0,x.sb)())})),[j,l,n]),(0,r.jsx)("div",{className:"modal fade show d-block",id:"kt_modal_add_draft",role:"dialog",tabIndex:-1,"aria-modal":"true",children:(0,r.jsx)("div",{className:"modal-dialog modal-dialog-centered mw-650px",children:(0,r.jsxs)("div",{className:"modal-content",style:{display:"flex",justifyContent:"center"},children:[(0,r.jsx)(h.Z,{title:"Add new customer",handleCloseModal:()=>l(!1)}),(0,r.jsx)("div",{className:"pb-10 ps-10 pe-10",children:(0,r.jsx)(m,{onSubmit:e=>{let{name:s,lastName:a,phone:t}=e;o({name:s,lastName:a,phone:t})}})})]})})})},j=e=>{let{addCustomer:s,dataSource:a,columns:m,rowKey:i,customTheme:c,title:u,paginationData:h,fetchNextData:x,state:j,loading:f}=e;const[b,N]=(0,t.useState)(!1),g=(0,r.jsx)("span",{style:{color:c.color},children:"No Data"});return(0,r.jsxs)(o.ZP,{theme:{token:{colorBgContainer:c.backgroundColor,colorText:c.color}},children:[(0,r.jsxs)("div",{style:{backgroundColor:c.backgroundColor,padding:"10px 20px",borderRadius:"10px"},children:[(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,r.jsx)("h1",{style:{color:c.color,marginTop:"20px",marginBottom:"20px",fontFamily:"Inter",paddingLeft:"20px",paddingRight:"20px"},children:u}),(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,r.jsxs)("button",{type:"button",className:"btn btn-success p-2 p-md-3 me-3",onClick:()=>{document.body.classList.add("modal-open"),document.body.classList.remove("modal-closed"),N(!0)},children:[(0,r.jsx)(d.D9,{iconName:"plus",className:"fs-2"}),"Excel Import"]}),(0,r.jsxs)("button",{type:"button",className:"btn btn-primary p-2 p-md-3",onClick:()=>{document.body.classList.add("modal-open"),document.body.classList.remove("modal-closed"),N(!0)},children:[(0,r.jsx)(d.D9,{iconName:"plus",className:"fs-2"}),"Customers"===u?"Add Customer":"Draft Table"===u?"Add Draft":"Add File"]})]})]}),(0,r.jsx)(l.Z,{style:{backgroundColor:c.backgroundColor,borderRadius:"10px",display:"flex",flexDirection:"column",marginTop:"1rem"},loading:f,dataSource:a,columns:m,pagination:{current:h.page,total:h.totalItems,pageSize:h.perpage,onChange:e=>x(e)},rowKey:i,scroll:{x:"auto"},locale:{emptyText:(0,r.jsx)(n.Z,{description:g})}})]}),b&&(0,r.jsx)(p,{addCustomer:s,fetchNextData:x,page:h.page,setIsAddModalShow:N,customTheme:c,title:u}),b&&(0,r.jsx)("div",{className:"modal-backdrop fade show"})]})},f=e=>{let{title:s,handleCloseModal:a}=e;return(0,r.jsxs)("div",{className:"modal-header",children:[(0,r.jsx)("h2",{className:"fw-bolder",children:s}),(0,r.jsx)("div",{className:"btn btn-icon btn-sm btn-active-icon-primary cursor-pointer","data-kt-users-modal-action":"close",onClick:a,children:(0,r.jsx)(d.D9,{iconName:"cross",className:"fs-1"})})]})},b=e=>{let{setIsAddGroupModal:s}=e;return(0,r.jsx)("div",{className:"modal fade show d-block",id:"kt_modal_add_draft",role:"dialog",tabIndex:-1,"aria-modal":"true",children:(0,r.jsx)("div",{className:"modal-dialog modal-dialog-centered mw-650px",children:(0,r.jsxs)("div",{className:"modal-content",style:{display:"flex",justifyContent:"center"},children:[(0,r.jsx)(f,{title:"Customer Added Group",handleCloseModal:()=>s(!1)}),(0,r.jsxs)("div",{className:" d-flex justify-content-between p-10 ",children:[(0,r.jsx)("div",{className:" d-flex justify-content-end",children:(0,r.jsx)("button",{className:"btn btn-primary fw-bold",type:"button",onClick:()=>s(!0),children:"Add to Gray List"})}),(0,r.jsx)("div",{className:" d-flex justify-content-end",children:(0,r.jsx)("button",{className:"btn btn-primary fw-bold",type:"button",onClick:()=>s(!0),children:"Add to Blacklist"})})]})]})})})},N=e=>{let{setIsUserInfoShowModal:s,selectedUser:a,formatPhoneNumber:o}=e;const[l,d]=(0,t.useState)(!1);return(0,r.jsxs)("div",{className:"modal fade show d-block",id:"kt_modal_add_draft",role:"dialog",tabIndex:-1,"aria-modal":"true",children:[(0,r.jsx)("div",{className:"modal-dialog modal-dialog-centered mw-650px",children:(0,r.jsxs)("div",{className:"modal-content",style:{display:"flex",justifyContent:"center"},children:[(0,r.jsx)(f,{title:"Customer Information",handleCloseModal:()=>s(!1)}),(0,r.jsx)("div",{className:"pb-10 ps-10 pe-10",children:a&&(0,r.jsxs)("div",{style:{fontFamily:"Inter"},children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"20px"},children:[(0,r.jsx)("h1",{children:a.name}),(0,r.jsx)("h6",{children:a.lastName})]}),(0,r.jsxs)("div",{style:{display:"flex",flexDirection:"column",marginTop:"20px",marginBottom:"20px"},children:[(0,r.jsx)("h2",{className:"fw-bold",children:"Tel No: "}),(0,r.jsx)("h6",{children:o(a.phone)})]})]}),(0,r.jsxs)("div",{className:"d-flex flex-row justify-content-between",children:[(0,r.jsx)("div",{className:" d-flex justify-content-end",children:(0,r.jsx)("button",{className:"btn btn-danger fw-bold",type:"submit",children:"Delete Customer"})}),(0,r.jsx)("div",{className:" d-flex justify-content-end",children:(0,r.jsx)("button",{className:"btn btn-primary fw-bold",type:"button",onClick:()=>d(!0),children:"Add To Blacklist or GrayList"})})]})]})})]})}),l&&(0,r.jsx)(b,{setIsAddGroupModal:d}),l&&(0,r.jsx)("div",{className:"modal-backdrop fade show"})]})};var g=a(5154);const C=e=>{let{updateCustomer:s,selectedUser:a,setIsEditShowModal:o}=e;const[l,d]=(0,t.useState)({name:"",lastName:"",phone:""}),n=e=>{const{name:s,value:a}=e.target;d((e=>({...e,[s]:a})))};return(0,t.useEffect)((()=>{a&&d({name:a.name,lastName:a.lastName,phone:a.phone})}),[a]),(0,r.jsx)("div",{className:"modal fade show d-block",id:"kt_modal_add_draft",role:"dialog",tabIndex:-1,"aria-modal":"true",children:(0,r.jsx)("div",{className:"modal-dialog modal-dialog-centered mw-650px",children:(0,r.jsxs)("div",{className:"modal-content",style:{display:"flex",justifyContent:"center"},children:[(0,r.jsx)(f,{title:"Customer Editing",handleCloseModal:()=>o(!1)}),(0,r.jsxs)("form",{className:"d-flex flex-column pb-10 ps-10 pe-10",style:{fontFamily:"Inter",marginTop:20},onSubmit:e=>{e.preventDefault(),s({name:l.name,lastName:l.lastName,phone:l.phone,customerId:a.id}),o(!1)},children:[(0,r.jsxs)("div",{className:"mt-3",children:[(0,r.jsx)("h4",{children:"Customer Name"}),(0,r.jsx)("input",{type:"text",name:"name",value:l.name,onChange:n,required:!0,className:"form-control form-control-solid w-100 mb-5 mt-2",placeholder:"Customer Name"})]}),(0,r.jsxs)("div",{className:"mt-3",children:[(0,r.jsx)("h4",{children:"Customer Lastname"}),(0,r.jsx)("input",{type:"text",name:"lastName",value:l.lastName,onChange:n,required:!0,className:"form-control form-control-solid w-100 mb-5 mt-2",placeholder:"Customer Lastname"})]}),(0,r.jsxs)("div",{className:"mt-3 w-100",children:[(0,r.jsx)("h4",{children:"Customer Phone Number"}),(0,r.jsx)("input",{type:"number",name:"phone",value:l.phone,onChange:n,className:"form-control form-control-solid w-100 mb-5",required:!0,placeholder:"Customer Phone Number"})]}),(0,r.jsx)("div",{className:" d-flex justify-content-end",children:(0,r.jsx)("button",{className:"btn btn-primary fw-bold",type:"submit",children:"Save"})})]})]})})})};var y=a(4928),v=a(4229),w=a(1742),k=a(3691),I=a(2290),S=a(5815);const A=e=>{let{onClick:s,iconName:a}=e;return(0,r.jsx)("button",{onClick:s,style:{marginRight:5,backgroundColor:"transparent",border:"none"},children:(0,r.jsx)(d.D9,{iconName:a,iconType:"duotone",className:"bigger-icon"})})},D=()=>{const{theme:e}=(0,I.Fg)(),s=(0,i.I0)(),a=(0,i.v9)((e=>e.customer.getCustomers)),o=(0,i.v9)((e=>e.customer.deleteCustomer)),l=(0,i.v9)((e=>e.customer.updateCustomer)),d=(0,i.v9)((e=>e.customer.addCustomer)),[n,m]=(0,t.useState)(!1),[h,p]=(0,t.useState)(!1),[f,b]=(0,t.useState)(!1),[D,T]=(0,t.useState)(),[E,L]=(0,t.useState)([]),[F,M]=(0,t.useState)({}),[_,U]=(0,t.useState)(10),P=(0,t.useCallback)((e=>{s((0,y.QH)({userId:(0,v.KA)("user").id,page:e,perPage:_}))})),q=e=>{let{customerId:a}=e;s((0,k.zt)({userId:(0,v.KA)("user").id,customerId:a}))};let K=[];const B=(0,t.useCallback)((()=>{if(E.length>0){const e=Object.keys(E[0]).filter((e=>"id"!==e&&"groupId"!==e));K=e.map((e=>({title:e.charAt(0).toUpperCase()+e.slice(1),dataIndex:e,key:e,width:"phone"===e?"2%":"6%",render:(s,a)=>(0,r.jsx)(r.Fragment,{children:"phone"===e?(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(g.D,{item:(0,S.u)(a[e])})}):(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(g.D,{item:a[e]})})})}))),K.push({title:"Action",dataIndex:"action",width:"1%",render:(e,s)=>(0,r.jsxs)("div",{style:{display:"flex"},children:[(0,r.jsx)(A,{iconName:"information-2",onClick:()=>(e=>{T(e),p(!0)})(s)}),(0,r.jsx)(A,{iconName:"notepad-edit",onClick:()=>(e=>{T(e),m(!0)})(s)}),(0,r.jsx)(A,{iconName:"trash-square",onClick:()=>(e=>{q({customerId:e.id})})(s)})]})})}}));return(0,t.useEffect)((()=>{s((0,y.QH)({userId:(0,v.KA)("user").id,page:1,perPage:_}))}),[_,s]),(0,t.useEffect)((()=>((0,c.d6)(a)&&(L(a.data.data),M(a.data.meta),b(!1)),(0,c.hx)(a),(0,c.hg)(a)&&b(!0),()=>{s((0,y.W9)())})),[E,s,a,o,d]),(0,t.useEffect)((()=>((0,c.d6)(o)&&((0,u.i)(o.data.message,"SUCCESS",e.theme),P(F.page)),(0,c.hx)(o)&&(0,u.i)(o.error.message,"FAIL",e.theme),()=>{s((0,k.aQ)())})),[o,s]),(0,t.useEffect)((()=>((0,c.d6)(l)&&((0,u.i)(l.data.message,"SUCCESS",e.theme),P(F.page)),(0,c.hx)(l)&&(0,u.i)(l.error.message,"FAIL",e.theme),()=>{s((0,w.JH)())})),[l,s]),B(),(0,r.jsx)("div",{style:{marginTop:"20px"},children:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(j,{addCustomer:e=>{let{name:a,lastName:t,phone:o}=e;s((0,x.LF)({userId:(0,v.KA)("user").id,name:a,lastName:t,phone:o}))},dataSource:E,dispathcer:s,columns:K,rowKey:"id",customTheme:e,title:"Customers",paginationData:F,state:a,fetchNextData:P,loading:f}),h&&(0,r.jsx)(N,{formatPhoneNumber:S.u,setIsUserInfoShowModal:p,selectedUser:D}),h&&(0,r.jsx)("div",{className:"modal-backdrop fade show"}),n&&(0,r.jsx)(C,{updateCustomer:e=>{let{name:a,lastName:t,phone:o,customerId:l}=e;s((0,w.VE)({userId:(0,v.KA)("user").id,name:a,lastName:t,phone:o,customerId:l}))},setIsEditShowModal:m,selectedUser:D}),n&&(0,r.jsx)("div",{className:"modal-backdrop fade show"})]})})}}}]);
//# sourceMappingURL=116.1b8dcd53.chunk.js.map